{% extends "base.html" %}

{% block title %}My Tasks | Steady Focus{% endblock %}

{% block content %}
<div class="container py-4">
    
    <div class="card shadow-sm mb-4 p-4 border-0 no-hover-lift">
            
            <h2 class="h3 mb-4 task-detail-title">
                {{ task.title }}
            </h2>
            
            <hr class="my-3">

            <div class="row small text-muted mb-4 g-2">
                <div class="col-6">
                    <i class="fa-regular fa-calendar-days me-2"></i>
                    <strong>Due:</strong> {{ task.due_date|default:"None" }}
                </div>
                <div class="col-6">
                    <i class="fa-regular fa-clock me-2"></i>
                    <strong>Time Est.:</strong> {{ task.estimated_minutes|default:"-" }} min
                </div>
                <div class="col-6">
                    <i class="fa-solid fa-circle-info me-2"></i>
                    <strong>Status:</strong> 
                    {% if task.completed %}
                        <span class="text-success fw-bold">Completed</span>
                    {% else %}
                        <span class="text-warning fw-bold">Pending</span>
                    {% endif %}
                </div>
            </div>
            
            {% if task.description %}
            <div class="mb-4 post-body">
                <p class="fw-bold">Details:</p>
                <div class="card p-3 bg-light border-0">
                    {{ task.description|linebreaks }}
                </div>
            </div>
            {% endif %}

            <div class="mt-4 pt-3 border-top d-flex justify-content-between align-items-center">
                
                <form method="post" action="{% url 'tasks:task_toggle' task.pk %}" class="d-inline">
                    {% csrf_token %}
                    {% if not task.completed %}
                        <button type="submit" class="btn btn-success btn-sm px-4 shadow-sm" aria-label="Mark task {{ task.title }} as done">
                            <i class="fa-solid fa-check me-1"></i> Mark as Done
                        </button>
                    {% else %}
                        <button type="submit" class="btn btn-outline-warning btn-sm px-4" aria-label="Undo complete for task {{ task.title }}">
                            <i class="fa-solid fa-rotate-left me-1"></i> Undo Complete
                        </button>
                    {% endif %}
                </form>

                <div class="btn-group" role="group">
                    <a href="{% url 'tasks:task_edit' task.pk %}" class="btn btn-primary btn-sm" aria-label="Edit task {{ task.title }}">
                        <i class="fa-solid fa-pen-to-square me-1"></i> Edit
                    </a>
                    <a href="{% url 'tasks:task_delete' task.pk %}" class="btn btn-outline-danger btn-sm" aria-label="Delete task {{ task.title }}">
                        <i class="fa-solid fa-trash-can me-1"></i> Delete
                    </a>
                </div>
            </div>
        </div>
        
        <p class="mt-4 text-center">
            <a href="{% url 'tasks:task_list' %}" class="btn btn-link text-muted" aria-label="Return to tasks list">
                &larr; Back to Task List
            </a>
        </p>

    </div>
{% endblock %}